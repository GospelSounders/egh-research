"use strict";(()=>{var e={};e.id=839,e.ids=[839],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},2048:e=>{e.exports=require("fs")},4080:(e,o,t)=>{t.r(o),t.d(o,{originalPathname:()=>h,patchFetch:()=>m,requestAsyncStorage:()=>l,routeModule:()=>u,serverHooks:()=>k,staticGenerationAsyncStorage:()=>b});var r={};t.r(r),t.d(r,{GET:()=>p,dynamic:()=>d});var n=t(3985),s=t(8659),a=t(2432),i=t(2937),c=t(2048);let d="force-dynamic";async function p(e,{params:o}){try{let t=parseInt(o.bookId),{searchParams:r}=e.nextUrl,n=r.get("chapter");console.log(`Fetching content for book ${t}, chapter: ${n}`);let s=JSON.parse((0,c.readFileSync)("/home/brian/Code/MCPSERVERS/egw-writings-mcp/data/books-export.json","utf8")).books.find(e=>e.book_id===t);if(!s)return i.NextResponse.json({success:!1,error:"Book not found"},{status:404});try{let e=`/home/brian/Code/MCPSERVERS/egw-writings-mcp/data/content/${t}.json`,o=JSON.parse((0,c.readFileSync)(e,"utf8"));if(n){let e=o.chapters.find(e=>e.chapter===parseInt(n));if(e)return i.NextResponse.json({success:!0,data:e,available:!0});return i.NextResponse.json({success:!1,error:`Chapter ${n} not found`,available:!0})}return i.NextResponse.json({success:!0,data:o,available:!0})}catch(e){return i.NextResponse.json({success:!1,error:"Book content not downloaded yet",message:`Content for "${s.title}" needs to be downloaded from EGW API`,available:!1,book:{id:s.book_id,title:s.title,author:s.author,pages:s.npages}})}}catch(e){return console.error("Book content API error:",e),i.NextResponse.json({success:!1,error:e instanceof Error?e.message:"Failed to load book content",available:!1},{status:500})}}let u=new n.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/books/[bookId]/content/route",pathname:"/api/books/[bookId]/content",filename:"route",bundlePath:"app/api/books/[bookId]/content/route"},resolvedPagePath:"/home/brian/Code/MCPSERVERS/egw-writings-mcp/apps/website/src/app/api/books/[bookId]/content/route.ts",nextConfigOutput:"standalone",userland:r}),{requestAsyncStorage:l,staticGenerationAsyncStorage:b,serverHooks:k}=u,h="/api/books/[bookId]/content/route";function m(){return(0,a.patchFetch)({serverHooks:k,staticGenerationAsyncStorage:b})}}};var o=require("../../../../../webpack-runtime.js");o.C(e);var t=e=>o(o.s=e),r=o.X(0,[800,144],()=>t(4080));module.exports=r})();