"use strict";(()=>{var e={};e.id=753,e.ids=[753],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},2048:e=>{e.exports=require("fs")},9882:(e,o,t)=>{t.r(o),t.d(o,{originalPathname:()=>m,patchFetch:()=>k,requestAsyncStorage:()=>g,routeModule:()=>p,serverHooks:()=>b,staticGenerationAsyncStorage:()=>d});var r={};t.r(r),t.d(r,{GET:()=>u,dynamic:()=>l});var s=t(3985),i=t(8659),a=t(2432),n=t(2937),c=t(2048);let l="force-dynamic";async function u(e){try{console.log("EGW Books Categories API route called");let{searchParams:o}=e.nextUrl,t=o.get("language")||"";console.log(`Language filter: ${t}`);let r=JSON.parse((0,c.readFileSync)("/home/brian/Code/MCPSERVERS/egw-writings-mcp/data/books-export.json","utf8")).books;t&&"all"!==t&&(r=r.filter(e=>e.lang===t));let s=new Map;for(let e of r){let o=e.category||"uncategorized",t=e.subcategory||"general",r=`${o}/${t}`;s.has(r)||s.set(r,{category:o,subcategory:t,count:0,books:[]});let i=s.get(r);i.count++,i.books.push({book_id:e.book_id,title:e.title,author:e.author,pub_year:e.pub_year})}let i=Array.from(s.values()),a={};for(let[e,o]of Object.entries({egw:{name:"Ellen G. White Writings",icon:"\uD83D\uDCD6",description:"Inspired writings of Ellen G. White",subcategories:["books","devotional","manuscripts","letters","testimonies","pamphlets"]},pioneer:{name:"Adventist Pioneers",icon:"\uD83C\uDFDB️",description:"Historical writings by Adventist pioneers",subcategories:["books","historical"]},periodical:{name:"Historical Periodicals",icon:"\uD83D\uDCF0",description:"Early Adventist magazines and publications",subcategories:["historical","pioneer"]},reference:{name:"Reference Materials",icon:"\uD83D\uDCDA",description:"Bible study tools and reference works",subcategories:["biblical","general"]},historical:{name:"Historical Works",icon:"\uD83C\uDFDB️",description:"Historical books and documents",subcategories:["denominational","general"]},devotional:{name:"Devotional Works",icon:"\uD83D\uDD4A️",description:"Modern devotional and spiritual books",subcategories:["modern","compilations"]}}))for(let t of(a[e]={...o,total:0,subcategories:{}},o.subcategories))a[e].subcategories[t]={name:t.charAt(0).toUpperCase()+t.slice(1),count:0,sampleBooks:[]};for(let e of i){let{category:o,subcategory:t,count:r,books:s}=e;a[o]&&(a[o].total+=r,a[o].subcategories[t]&&(a[o].subcategories[t].count=r,a[o].subcategories[t].sampleBooks=s.slice(0,5)))}return n.NextResponse.json({success:!0,data:{categories:a,summary:{totalBooks:r.length,totalCategories:Object.keys(a).length,language:t||"all"}}})}catch(e){return console.error("EGW Books Categories API error:",e),n.NextResponse.json({success:!1,error:e instanceof Error?e.message:"Unknown error"},{status:500})}}let p=new s.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/egw/books/categories/route",pathname:"/api/egw/books/categories",filename:"route",bundlePath:"app/api/egw/books/categories/route"},resolvedPagePath:"/home/brian/Code/MCPSERVERS/egw-writings-mcp/apps/website/src/app/api/egw/books/categories/route.ts",nextConfigOutput:"standalone",userland:r}),{requestAsyncStorage:g,staticGenerationAsyncStorage:d,serverHooks:b}=p,m="/api/egw/books/categories/route";function k(){return(0,a.patchFetch)({serverHooks:b,staticGenerationAsyncStorage:d})}}};var o=require("../../../../../webpack-runtime.js");o.C(e);var t=e=>o(o.s=e),r=o.X(0,[800,144],()=>t(9882));module.exports=r})();