(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[797],{3705:function(e,r,t){Promise.resolve().then(t.bind(t,4128))},4128:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return c}});var a=t(8980),s=t(2208),i=t(9211),n=t(5999),l=t(263),o=t(8020);function d(){let e=(0,i.useSearchParams)(),r=e.get("q")||"",t=parseInt(e.get("page")||"1",10),[d,c]=(0,s.useState)(null),[m,x]=(0,s.useState)(!1),[h,u]=(0,s.useState)(null),[g,y]=(0,s.useState)(!1);(0,s.useEffect)(()=>{r.trim()&&f(r,t)},[r,t]);let f=async function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(e.trim()){x(!0),u(null);try{let t=await (0,o.Nf)({q:e,limit:20,offset:(r-1)*20});c(t)}catch(e){u("Failed to perform search. Please try again."),console.error("Search error:",e)}finally{x(!1)}}},b=(e,r)=>{if(!r.trim())return e;let t=RegExp("(".concat(r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),")"),"gi");return e.split(t).map((e,r)=>t.test(e)?(0,a.jsx)("mark",{className:"bg-yellow-200 dark:bg-yellow-800 px-1 rounded",children:e},r):e)};return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[(0,a.jsx)("div",{className:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)(n.Z,{className:"h-6 w-6 text-gray-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Search Results"}),r&&(0,a.jsxs)("p",{className:"text-gray-600 dark:text-gray-300 mt-1",children:["Results for: ",(0,a.jsxs)("span",{className:"font-semibold",children:['"',r,'"']})]})]})]}),(0,a.jsxs)("button",{onClick:()=>y(!g),className:"flex items-center space-x-2 px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:[(0,a.jsx)(l.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Advanced Search"})]})]}),g&&(0,a.jsxs)("div",{className:"mt-6 bg-gray-50 dark:bg-gray-700 rounded-lg p-4 border border-gray-200 dark:border-gray-600",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"author-filter",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Author"}),(0,a.jsxs)("select",{id:"author-filter",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[(0,a.jsx)("option",{value:"",children:"All Authors"}),(0,a.jsx)("option",{value:"Ellen G. White",children:"Ellen G. White"}),(0,a.jsx)("option",{value:"W. C. White",children:"W. C. White"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"year-filter",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Publication Year"}),(0,a.jsxs)("select",{id:"year-filter",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[(0,a.jsx)("option",{value:"",children:"All Years"}),(0,a.jsx)("option",{value:"1800s",children:"1800-1899"}),(0,a.jsx)("option",{value:"1900s",children:"1900-1999"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"language-filter",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Language"}),(0,a.jsxs)("select",{id:"language-filter",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[(0,a.jsx)("option",{value:"",children:"All Languages"}),(0,a.jsx)("option",{value:"en",children:"English"}),(0,a.jsx)("option",{value:"es",children:"Spanish"}),(0,a.jsx)("option",{value:"fr",children:"French"}),(0,a.jsx)("option",{value:"de",children:"German"})]})]})]}),(0,a.jsxs)("div",{className:"mt-4 flex items-center justify-between",children:[(0,a.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:'Use quotes for exact phrases, e.g., "righteousness by faith"'}),(0,a.jsx)("button",{onClick:()=>{y(!1)},className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors",children:"Apply Filters"})]})]})]})}),(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[d&&!m&&(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Found ",d.total," results in ",d.total>0?"0.12":"0"," seconds"]})}),m&&(0,a.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"}),(0,a.jsx)("span",{className:"ml-3 text-gray-600 dark:text-gray-300",children:"Searching..."})]}),h&&(0,a.jsx)("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 mb-6",children:(0,a.jsx)("p",{className:"text-red-800 dark:text-red-200",children:h})}),d&&0===d.total&&!m&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(n.Z,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,a.jsx)("h3",{className:"mt-4 text-lg font-medium text-gray-900 dark:text-white",children:"No results found"}),(0,a.jsx)("p",{className:"mt-2 text-gray-600 dark:text-gray-300",children:"Try adjusting your search terms or check your spelling."}),(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-900 dark:text-white mb-2",children:"Search Tips:"}),(0,a.jsxs)("ul",{className:"text-sm text-gray-600 dark:text-gray-300 space-y-1",children:[(0,a.jsx)("li",{children:"• Use different keywords or synonyms"}),(0,a.jsx)("li",{children:"• Check spelling and try simpler terms"}),(0,a.jsx)("li",{children:"• Use quotation marks for exact phrases"}),(0,a.jsx)("li",{children:"• Try broader search terms"})]})]})]}),d&&d.results.length>0&&!m&&(0,a.jsx)("div",{className:"space-y-6",children:d.results.map((e,t)=>(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6 hover:shadow-md transition-shadow",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-primary-600 dark:text-primary-400 hover:text-primary-800 dark:hover:text-primary-300",children:(0,a.jsx)("a",{href:e.url,className:"hover:underline",children:b(e.title,r)})}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:["by ",b(e.author,r)]})]}),(0,a.jsx)("div",{className:"text-right",children:(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-primary-100 text-primary-800 dark:bg-primary-800 dark:text-primary-200",children:"Book"})})]}),(0,a.jsx)("div",{className:"mb-3",children:(0,a.jsxs)("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Reference: ",b(e.reference,r)]})}),(0,a.jsx)("div",{className:"text-gray-700 dark:text-gray-300",children:(0,a.jsx)("p",{children:b(e.snippet,r)})}),(0,a.jsxs)("div",{className:"mt-4 flex items-center justify-between",children:[(0,a.jsx)("div",{className:"flex items-center space-x-4 text-xs text-gray-500 dark:text-gray-400",children:(0,a.jsxs)("span",{children:["Book ID: ",e.book_id]})}),(0,a.jsx)("a",{href:e.url,className:"inline-flex items-center text-sm font-medium text-primary-600 dark:text-primary-400 hover:text-primary-800 dark:hover:text-primary-300",children:"Read book →"})]})]},"".concat(e.book_id,"-").concat(t)))}),d&&d.total>20&&(0,a.jsxs)("div",{className:"mt-8 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Showing ",d.offset+1," to ",Math.min(d.offset+d.limit,d.total)," of ",d.total," results"]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("a",{href:t>1?"/search?q=".concat(encodeURIComponent(r),"&page=").concat(t-1):"#",className:"px-3 py-2 text-sm font-medium border rounded-md ".concat(t>1?"text-primary-600 dark:text-primary-400 bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700":"text-gray-500 bg-gray-100 dark:bg-gray-700 border-gray-300 dark:border-gray-600 cursor-not-allowed"),"aria-disabled":t<=1,children:"Previous"}),(0,a.jsx)("a",{href:d.offset+d.limit<d.total?"/search?q=".concat(encodeURIComponent(r),"&page=").concat(t+1):"#",className:"px-3 py-2 text-sm font-medium border rounded-md ".concat(d.offset+d.limit<d.total?"text-primary-600 dark:text-primary-400 bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700":"text-gray-500 bg-gray-100 dark:bg-gray-700 border-gray-300 dark:border-gray-600 cursor-not-allowed"),"aria-disabled":d.offset+d.limit>=d.total,children:"Next"})]})]}),!r&&!m&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(n.Z,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,a.jsx)("h3",{className:"mt-4 text-lg font-medium text-gray-900 dark:text-white",children:"Enter a search term"}),(0,a.jsx)("p",{className:"mt-2 text-gray-600 dark:text-gray-300",children:"Use the search bar to find books, authors, and content."})]})]})]})}function c(){return(0,a.jsx)(s.Suspense,{fallback:(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"}),(0,a.jsx)("span",{className:"ml-3 text-gray-600 dark:text-gray-300",children:"Loading search..."})]}),children:(0,a.jsx)(d,{})})}},8020:function(e,r,t){"use strict";t.d(r,{CP:function(){return m},Nf:function(){return d},Vb:function(){return c},yZ:function(){return o}});let a=null,s=null;function i(){return window.location.pathname.startsWith("/egh-research"),"/egh-research"}async function n(){if(a)return a;try{let e=await fetch("".concat(i(),"/api/data.json"));if(!e.ok)throw Error("Failed to load data");return a=await e.json()}catch(e){throw console.error("Error loading static data:",e),e}}async function l(){if(s)return s;try{let e=i(),r=await fetch("".concat(e,"/api/books.json"));if(r.ok){let e=await r.json();return s=e.all||e}return s=(await n()).books.all}catch(e){throw console.error("Error loading books data:",e),e}}async function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{page:r=1,limit:t=50,lang:a,folder:s}=e,i=await l();a&&(i=i.filter(e=>e.lang===a)),s&&(i=i.filter(e=>e.folder===s));let n=(r-1)*t,o=i.slice(n,n+t),d=n+t<i.length?r+1:null,c=r>1?r-1:null,m=e=>{let r=new URLSearchParams({page:e.toString(),limit:t.toString(),...a&&{lang:a},...s&&{folder:s}});return"".concat("","?").concat(r.toString())};return{count:i.length,ipp:t,next:d?m(d):null,previous:c?m(c):null,results:o}}async function d(e){let{q:r,limit:t=20,offset:a=0}=e,s=await l(),i=r.toLowerCase(),n=s.filter(e=>e.title.toLowerCase().includes(i)||e.author.toLowerCase().includes(i)||e.description&&e.description.toLowerCase().includes(i)),o=n.slice(a,a+t).map(e=>({book_id:e.book_id,title:e.title,author:e.author,reference:"".concat(e.title," (").concat(e.pub_year,")"),snippet:"".concat(e.description||e.title," - ").concat(e.author),url:"/books/".concat(e.book_id)}));return{query:r,total:n.length,limit:t,offset:a,results:o}}async function c(){return Object.keys((await n()).books.byLanguage).sort()}async function m(){return Object.keys((await n()).books.byCategory).sort()}},9211:function(e,r,t){"use strict";var a=t(2544);t.o(a,"useParams")&&t.d(r,{useParams:function(){return a.useParams}}),t.o(a,"useRouter")&&t.d(r,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(r,{useSearchParams:function(){return a.useSearchParams}})},263:function(e,r,t){"use strict";var a=t(2208);let s=a.forwardRef(function(e,r){let{title:t,titleId:s,...i}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},i),t?a.createElement("title",{id:s},t):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6h9.75M10.5 6a1.5 1.5 0 1 1-3 0m3 0a1.5 1.5 0 1 0-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-9.75 0h9.75"}))});r.Z=s},5999:function(e,r,t){"use strict";var a=t(2208);let s=a.forwardRef(function(e,r){let{title:t,titleId:s,...i}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},i),t?a.createElement("title",{id:s},t):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))});r.Z=s}},function(e){e.O(0,[14,512,744],function(){return e(e.s=3705)}),_N_E=e.O()}]);