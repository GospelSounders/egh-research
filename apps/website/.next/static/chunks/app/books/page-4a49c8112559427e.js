(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[23],{6794:function(e,t,r){Promise.resolve().then(r.bind(r,4286))},4286:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return c}});var a=r(8980),s=r(2208),n=r(8020),o=r(9014),l=r(5999),i=r(9603);function c(){let[e,t]=(0,s.useState)([]),[r,c]=(0,s.useState)([]),[d,u]=(0,s.useState)([]),[g,m]=(0,s.useState)(!0),[x,h]=(0,s.useState)(""),[p,f]=(0,s.useState)("en"),[y,b]=(0,s.useState)(""),[w,k]=(0,s.useState)(1),[v,j]=(0,s.useState)(0);(0,s.useEffect)(()=>{N()},[]),(0,s.useEffect)(()=>{C()},[x,p,w]);let N=async()=>{try{let[e,t]=await Promise.all([(0,n.CP)(),(0,n.Vb)()]);c(e),u(t)}catch(e){console.error("Failed to load initial data:",e)}},C=async()=>{m(!0);try{let e=await (0,n.yZ)({page:w,limit:24,lang:p||void 0,folder:x||void 0});t(e.results),j(e.count)}catch(e){console.error("Failed to load books:",e)}finally{m(!1)}},E=Math.ceil(v/24),L=y?e.filter(e=>e.title.toLowerCase().includes(y.toLowerCase())||e.author.toLowerCase().includes(y.toLowerCase())):e;return(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold mb-4",children:"\uD83D\uDCDA EGH Research Library"}),(0,a.jsxs)("p",{className:"text-xl text-gray-600 dark:text-gray-300",children:["Explore ",v.toLocaleString()," books in ",d.length," languages"]})]}),(0,a.jsxs)("div",{className:"mb-8 space-y-4",children:[(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),y.trim()&&(window.location.href="/search?q=".concat(encodeURIComponent(y)))},className:"relative max-w-md",children:[(0,a.jsx)(l.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,a.jsx)("input",{type:"text",placeholder:"Search books...",value:y,onChange:e=>b(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,a.jsxs)("select",{value:p,onChange:e=>{f(e.target.value),k(1)},className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[(0,a.jsx)("option",{value:"",children:"All Languages"}),d.map(e=>(0,a.jsxs)("option",{value:e,children:[e.toUpperCase()," ","en"===e?"(English)":""]},e))]}),(0,a.jsxs)("select",{value:x,onChange:e=>{h(e.target.value),k(1)},className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[(0,a.jsx)("option",{value:"",children:"All Categories"}),r.map(e=>(0,a.jsx)("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))]})]})]}),g?(0,a.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 mb-8",children:L.map(e=>(0,a.jsx)(o.default,{href:"/books/".concat(e.book_id),className:"block bg-white dark:bg-gray-800 rounded-lg shadow-md hover:shadow-lg transition-shadow border border-gray-200 dark:border-gray-700",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-start space-x-3 mb-3",children:[(0,a.jsx)(i.Z,{className:"h-6 w-6 text-primary-600 flex-shrink-0 mt-0.5"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white line-clamp-2",children:e.title}),(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:e.author})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500 dark:text-gray-400",children:[(0,a.jsx)("span",{children:e.pub_year}),(0,a.jsxs)("span",{children:[e.npages," pages"]})]}),(0,a.jsxs)("div",{className:"mt-2 flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-primary-100 text-primary-800 dark:bg-primary-900 dark:text-primary-200",children:e.lang.toUpperCase()}),(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200",children:e.folder})]})]})},e.book_id))}),E>1&&(0,a.jsxs)("div",{className:"flex justify-center items-center space-x-2",children:[(0,a.jsx)("button",{onClick:()=>k(Math.max(1,w-1)),disabled:1===w,className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:text-gray-700 disabled:opacity-50 disabled:cursor-not-allowed dark:bg-gray-800 dark:border-gray-600 dark:text-gray-400 dark:hover:bg-gray-700",children:"Previous"}),(0,a.jsxs)("span",{className:"px-3 py-2 text-sm text-gray-700 dark:text-gray-300",children:["Page ",w," of ",E]}),(0,a.jsx)("button",{onClick:()=>k(Math.min(E,w+1)),disabled:w===E,className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:text-gray-700 disabled:opacity-50 disabled:cursor-not-allowed dark:bg-gray-800 dark:border-gray-600 dark:text-gray-400 dark:hover:bg-gray-700",children:"Next"})]})]})]})}},8020:function(e,t,r){"use strict";r.d(t,{CP:function(){return u},Nf:function(){return c},Vb:function(){return d},yZ:function(){return i}});let a=null,s=null;function n(){return window.location.pathname.startsWith("/egh-research"),"/egh-research"}async function o(){if(a)return a;try{let e=await fetch("".concat(n(),"/api/data.json"));if(!e.ok)throw Error("Failed to load data");return a=await e.json()}catch(e){throw console.error("Error loading static data:",e),e}}async function l(){if(s)return s;try{let e=n(),t=await fetch("".concat(e,"/api/books.json"));if(t.ok){let e=await t.json();return s=e.all||e}return s=(await o()).books.all}catch(e){throw console.error("Error loading books data:",e),e}}async function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{page:t=1,limit:r=50,lang:a,folder:s}=e,n=await l();a&&(n=n.filter(e=>e.lang===a)),s&&(n=n.filter(e=>e.folder===s));let o=(t-1)*r,i=n.slice(o,o+r),c=o+r<n.length?t+1:null,d=t>1?t-1:null,u=e=>{let t=new URLSearchParams({page:e.toString(),limit:r.toString(),...a&&{lang:a},...s&&{folder:s}});return"".concat("","?").concat(t.toString())};return{count:n.length,ipp:r,next:c?u(c):null,previous:d?u(d):null,results:i}}async function c(e){let{q:t,limit:r=20,offset:a=0}=e,s=await l(),n=t.toLowerCase(),o=s.filter(e=>e.title.toLowerCase().includes(n)||e.author.toLowerCase().includes(n)||e.description&&e.description.toLowerCase().includes(n)),i=o.slice(a,a+r).map(e=>({book_id:e.book_id,title:e.title,author:e.author,reference:"".concat(e.title," (").concat(e.pub_year,")"),snippet:"".concat(e.description||e.title," - ").concat(e.author),url:"/books/".concat(e.book_id)}));return{query:t,total:o.length,limit:r,offset:a,results:i}}async function d(){return Object.keys((await o()).books.byLanguage).sort()}async function u(){return Object.keys((await o()).books.byCategory).sort()}},9014:function(e,t,r){"use strict";r.d(t,{default:function(){return s.a}});var a=r(3795),s=r.n(a)},9603:function(e,t,r){"use strict";var a=r(2208);let s=a.forwardRef(function(e,t){let{title:r,titleId:s,...n}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},n),r?a.createElement("title",{id:s},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"}))});t.Z=s},5999:function(e,t,r){"use strict";var a=r(2208);let s=a.forwardRef(function(e,t){let{title:r,titleId:s,...n}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},n),r?a.createElement("title",{id:s},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))});t.Z=s}},function(e){e.O(0,[795,14,512,744],function(){return e(e.s=6794)}),_N_E=e.O()}]);