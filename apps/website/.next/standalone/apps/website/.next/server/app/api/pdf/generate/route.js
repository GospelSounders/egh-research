"use strict";(()=>{var e={};e.id=596,e.ids=[596],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},2048:e=>{e.exports=require("fs")},1871:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>m,patchFetch:()=>x,requestAsyncStorage:()=>l,routeModule:()=>c,serverHooks:()=>f,staticGenerationAsyncStorage:()=>g});var o={};t.r(o),t.d(o,{POST:()=>u,dynamic:()=>d});var n=t(3985),s=t(8659),a=t(2432),i=t(2937),p=t(2048);let d="force-dynamic";async function u(e){try{let{bookId:r,config:t}=await e.json();console.log("PDF generation request for book:",r),console.log("Config:",t);let o=JSON.parse((0,p.readFileSync)("/home/brian/Code/MCPSERVERS/egw-writings-mcp/data/books-export.json","utf8")).books.find(e=>e.book_id===r);if(!o)return i.NextResponse.json({success:!1,error:"Book not found"},{status:404});await new Promise(e=>setTimeout(e,1e3));let n=`/api/pdf/download/${r}?config=${encodeURIComponent(JSON.stringify(t))}`;return i.NextResponse.json({success:!0,message:"PDF generated successfully",downloadUrl:n,filename:`${o.title.replace(/[^a-zA-Z0-9]/g,"_")}.pdf`})}catch(e){return console.error("PDF generation error:",e),i.NextResponse.json({success:!1,error:e instanceof Error?e.message:"PDF generation failed"},{status:500})}}let c=new n.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/pdf/generate/route",pathname:"/api/pdf/generate",filename:"route",bundlePath:"app/api/pdf/generate/route"},resolvedPagePath:"/home/brian/Code/MCPSERVERS/egw-writings-mcp/apps/website/src/app/api/pdf/generate/route.ts",nextConfigOutput:"standalone",userland:o}),{requestAsyncStorage:l,staticGenerationAsyncStorage:g,serverHooks:f}=c,m="/api/pdf/generate/route";function x(){return(0,a.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:g})}}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[800,144],()=>t(1871));module.exports=o})();