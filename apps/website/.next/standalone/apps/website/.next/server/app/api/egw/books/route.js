"use strict";(()=>{var e={};e.id=729,e.ids=[729],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},2048:e=>{e.exports=require("fs")},7457:(e,o,t)=>{t.r(o),t.d(o,{originalPathname:()=>h,patchFetch:()=>m,requestAsyncStorage:()=>u,routeModule:()=>p,serverHooks:()=>f,staticGenerationAsyncStorage:()=>d});var r={};t.r(r),t.d(r,{GET:()=>c,dynamic:()=>g});var s=t(3985),a=t(8659),n=t(2432),l=t(2937),i=t(2048);let g="force-dynamic";async function c(e){try{console.log("EGW Books API route called - using JSON export");let{searchParams:o}=e.nextUrl,t=parseInt(o.get("page")||"1"),r=parseInt(o.get("limit")||"20"),s=o.get("search")||"",a=o.get("category")||"",n=o.get("language")||"";console.log(`Query params: page=${t}, limit=${r}, search="${s}", category="${a}", language="${n}"`);let g="/home/brian/Code/MCPSERVERS/egw-writings-mcp/data/books-export.json";console.log("Loading books from JSON export:",g);let c=JSON.parse((0,i.readFileSync)(g,"utf8")).books;if(console.log(`Total books in export: ${c.length}`),n&&"all"!==n&&(c=c.filter(e=>e.lang===n),console.log(`After language filter: ${c.length} books`)),s&&(c=c.filter(e=>e.title.toLowerCase().includes(s.toLowerCase())||e.author.toLowerCase().includes(s.toLowerCase())||e.description?.toLowerCase().includes(s.toLowerCase())),console.log(`After search filter: ${c.length} books`)),a&&"all"!==a){if(a.includes("/")){let[e,o]=a.split("/");c=c.filter(t=>t.category===e&&t.subcategory===o)}else c=c.filter(e=>e.category===a);console.log(`After category filter: ${c.length} books`)}let p=(t-1)*r,u=c.length,d=c.slice(p,p+r);return console.log(`Returning ${d.length} books (page ${t} of ${Math.ceil(u/r)})`),l.NextResponse.json({success:!0,data:d,total:u,page:t,limit:r,totalPages:Math.ceil(u/r)})}catch(e){return console.error("EGW Books API error:",e),l.NextResponse.json({success:!1,error:e instanceof Error?e.message:"Unknown error"},{status:500})}}let p=new s.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/egw/books/route",pathname:"/api/egw/books",filename:"route",bundlePath:"app/api/egw/books/route"},resolvedPagePath:"/home/brian/Code/MCPSERVERS/egw-writings-mcp/apps/website/src/app/api/egw/books/route.ts",nextConfigOutput:"standalone",userland:r}),{requestAsyncStorage:u,staticGenerationAsyncStorage:d,serverHooks:f}=p,h="/api/egw/books/route";function m(){return(0,n.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:d})}}};var o=require("../../../../webpack-runtime.js");o.C(e);var t=e=>o(o.s=e),r=o.X(0,[800,144],()=>t(7457));module.exports=r})();