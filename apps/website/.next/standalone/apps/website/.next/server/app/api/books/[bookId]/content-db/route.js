"use strict";(()=>{var e={};e.id=167,e.ids=[167],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},1282:e=>{e.exports=require("child_process")},1707:(e,t,o)=>{o.r(t),o.d(t,{originalPathname:()=>g,patchFetch:()=>h,requestAsyncStorage:()=>l,routeModule:()=>u,serverHooks:()=>m,staticGenerationAsyncStorage:()=>b});var r={};o.r(r),o.d(r,{GET:()=>p,dynamic:()=>d});var s=o(3985),n=o(8659),a=o(2432),i=o(2937),c=o(1282);let d="force-dynamic";async function p(e,{params:t}){try{let o=parseInt(t.bookId),{searchParams:r}=e.nextUrl,s=r.get("chapter");return console.log(`Fetching content from database for book ${o}, chapter: ${s}`),new Promise(e=>{let t=["/home/brian/Code/MCPSERVERS/egw-writings-mcp/scripts/get-book-content.js",o.toString()];s&&t.push(s);let r=(0,c.spawn)("node",t),n="",a="";r.stdout.on("data",e=>{n+=e.toString()}),r.stderr.on("data",e=>{a+=e.toString()}),r.on("close",t=>{if(0===t)try{let t=JSON.parse(n);e(i.NextResponse.json(t))}catch(t){e(i.NextResponse.json({success:!1,error:"Failed to parse database response",available:!1}))}else e(i.NextResponse.json({success:!1,error:a||"Database query failed",available:!1}))})})}catch(e){return console.error("Content DB API error:",e),i.NextResponse.json({success:!1,error:e instanceof Error?e.message:"Failed to load content from database",available:!1},{status:500})}}let u=new s.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/books/[bookId]/content-db/route",pathname:"/api/books/[bookId]/content-db",filename:"route",bundlePath:"app/api/books/[bookId]/content-db/route"},resolvedPagePath:"/home/brian/Code/MCPSERVERS/egw-writings-mcp/apps/website/src/app/api/books/[bookId]/content-db/route.ts",nextConfigOutput:"standalone",userland:r}),{requestAsyncStorage:l,staticGenerationAsyncStorage:b,serverHooks:m}=u,g="/api/books/[bookId]/content-db/route";function h(){return(0,a.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:b})}}};var t=require("../../../../../webpack-runtime.js");t.C(e);var o=e=>t(t.s=e),r=t.X(0,[800,144],()=>o(1707));module.exports=r})();